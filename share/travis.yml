# DO NOT EDIT
#
# This .travis.yml file generated by Zilla::Dist. To upgrade it, run:
#
#   > make update
#

language: perl

perl:
- '5.18'
- '5.16'
- '5.14'
- '5.12'
- '5.10'
- '5.8'

install:
[% IF testbase -%]
- git clone --depth=1
  git://github.com/ingydotnet/test-base-pm ../test-base-pm
[% END -%]
[% IF testml -%]
- git clone --depth=1
  git://github.com/ingydotnet/testml-pm ../testml-pm
- git clone --depth=1
  git://github.com/ingydotnet/pegex-pm ../pegex-pm
[% END -%]
- cpanm --quiet --notest
  Devel::Cover::Report::Coveralls
[% FOR module = RequiredModules.sort -%]
[% IF module != 'perl' -%]
  [% module %]
[% END -%]
[% END -%]

script:
- PERL5OPT=-MDevel::Cover=-coverage,statement,branch,condition,path,subroutine
[% IF testbase -%]
  PERL5LIB=../test-base-pm/lib
[% END -%]
  prove -lv test/
- cover

after_success:
- cover -report coveralls

[% IF irc -%]
notifications:
  irc:
    channels:
    - [% irc %]
    on_success: change
    on_failure: always
[% END -%]

# Hack to not run on tag pushes:
branches:
  except:
  - /^v?[0-9]+\.[0-9]+/
